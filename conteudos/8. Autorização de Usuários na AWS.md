## Autoriza√ß√£o de Usu√°rios na AWS

## Conceito de Pol√≠tica
Uma **pol√≠tica** √© um objeto que define permiss√µes para a identidade ou o recurso ao qual est√° associada.  
Com as pol√≠ticas, √© poss√≠vel ajustar as permiss√µes concedidas √†s entidades principais, como:

- Usu√°rios do IAM  
- Perfis do IAM  
- Servi√ßos da AWS  

Existem **dois tipos de pol√≠ticas**:

<img width="560" height="253" alt="image" src="https://github.com/user-attachments/assets/6741a3f2-5f07-46c3-a472-4c249f19db29" />

### 1. Pol√≠ticas Baseadas em Identidade
- Anexadas a usu√°rios, grupos ou perfis do IAM.  
- Indicam **o que a identidade pode fazer**.

### 2. Pol√≠ticas Baseadas em Recurso
- Anexadas diretamente aos recursos.  
- Indicam **o que usu√°rios espec√≠ficos (ou grupos)** t√™m permiss√£o para fazer com aquele recurso.

A principal diferen√ßa entre elas √© **onde s√£o aplicadas**.

## Como a AWS Avalia Pol√≠ticas
A maioria das pol√≠ticas √© armazenada como documentos **JSON**.  
Quando uma entidade principal do IAM faz uma solicita√ß√£o, a AWS avalia todas as pol√≠ticas aplic√°veis.

A l√≥gica segue essas regras:

1. **"Por padr√£o", todas as solicita√ß√µes s√£o negadas** ‚Üí nega√ß√£o impl√≠cita.  
2. **Uma *permiss√£o expl√≠cita* substitui a nega√ß√£o "por padr√£o".**  
3. **Uma *nega√ß√£o expl√≠cita* sempre vence** ‚Üí substitui qualquer "permiss√£o expl√≠cita".

üìå **Importante:**  
A ordem em que as pol√≠ticas s√£o avaliadas **n√£o importa**.  
Se houver conflito entre pol√≠ticas, a mais *restritiva* (a que nega) √© aplicada.

### Princ√≠pio de Menor Privil√©gio
A recomenda√ß√£o √© sempre seguir o **princ√≠pio do menor privil√©gio**, concedendo apenas as permiss√µes m√≠nimas necess√°rias.

## Avalia√ß√£o de Acesso no IAM

Quando o IAM determina se uma a√ß√£o √© permitida, ele verifica:

1. Se existe **alguma nega√ß√£o expl√≠cita** para a a√ß√£o.  
2. Se n√£o houver, ele procura uma **permiss√£o expl√≠cita**.  
3. Se n√£o houver permiss√£o expl√≠cita nem nega√ß√£o expl√≠cita, aplica-se a **nega√ß√£o impl√≠cita**.

<img width="610" height="241" alt="image" src="https://github.com/user-attachments/assets/33874a2a-1f27-44ad-9ded-076778ee4ca6" />

A a√ß√£o s√≥ ser√° permitida se:

- **N√£o for explicitamente negada**, e
- **For explicitamente permitida**.

### Ferramenta: IAM Policy Simulator
Criar e analisar pol√≠ticas pode ser complexo.  
A AWS fornece o **IAM Policy Simulator**, que permite testar e depurar pol√≠ticas de forma segura.

> Observa√ß√µes sobre N/A
> Em tabelas de permiss√µes, **N/A** significa "n√£o aplic√°vel" ‚Äî a pol√≠tica n√£o define permiss√µes para aquela a√ß√£o espec√≠fica.

<img width="626" height="272" alt="image" src="https://github.com/user-attachments/assets/b48a4a2c-a959-435d-807d-0720a489c2c3" />

## Identidade x Recurso ‚Äî Exemplos Pr√°ticos

### Pol√≠ticas Baseadas em Identidade
Concedem permiss√µes a identidades do IAM.  
Exemplo: permitir que um usu√°rio acesse uma tabela do DynamoDB.

### Pol√≠ticas Baseadas em Recursos
Concedem permiss√µes diretamente no recurso.  
Exemplo: permitir acesso a um bucket do S3 para outra conta confi√°vel.

## Cen√°rios com Amazon S3

### Exemplo 1 ‚Äî Conflito Entre Pol√≠ticas
O S3 √© compat√≠vel com mecanismos de controle baseados em identidade e em recurso.

<img width="626" height="278" alt="image" src="https://github.com/user-attachments/assets/3d95f150-07af-47b1-b8bf-221ca30064a2" />

### Cen√°rio:
- O usu√°rio **Bob** tem uma pol√≠tica baseada em identidade que permite:
  - `GET`, `PUT`, `LIST` no bucket **X**.
- A pol√≠tica baseada em recurso do bucket **X**:
  - Permite `GET` e `LIST`.
  - **Nega `PUT`**.

### Resultado:
‚û°Ô∏è Bob **n√£o pode usar PUT** no bucket X, pois **a nega√ß√£o expl√≠cita vence**.

### Exemplo 2 ‚Äî Permiss√£o Concedida pelo Recurso

<img width="623" height="275" alt="image" src="https://github.com/user-attachments/assets/c171b0bf-3d5e-46c6-87ea-ecdadcb3078f" />

### Cen√°rio:
- A pol√≠tica baseada em identidade de Bob para o bucket **Y**:
  - Permite `LIST`.
  - N√£o permite nem nega `GET` ou `PUT`.
- A pol√≠tica baseada em recurso do bucket **Y**:
  - Permite `GET` e `LIST`.
  - N√£o especifica `PUT`.

### Resultado:
‚û°Ô∏è Bob **pode ler objetos** (`GET`), pois a pol√≠tica baseada em recurso concede essa permiss√£o ‚Äî mesmo que a pol√≠tica de identidade **n√£o permita explicitamente**.

---

üëâüèª [Clique aqui para voltar ao Readme](https://github.com/DrikaDev/Estudando-AWS-Solutions-Architect-Associate/blob/main/README.md) üìí
